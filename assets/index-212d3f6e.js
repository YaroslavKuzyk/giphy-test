import{G as f}from"./GifItem-02f36c62.js";import{_}from"./logo-374986b0.js";import{_ as m}from"./_plugin-vue_export-helper-c27b6911.js";import{r as g,o as r,c as h,a as i,b as d,F as u,d as y}from"./index-43e776ac.js";const D={components:{GifItem:f},data(){return{search:"",list:[],count:24,totalCount:0,method:"trending"}},watch:{search(t){this.searchData(t),t?this.method="search":(this.method="trending",this.fetchData())}},methods:{async fetchData(){try{const t=await fetch(`https://api.giphy.com/v1/gifs/trending?api_key=XQJsiGIND0fn0MgbDhlEPcgKxR7DykpN&limit=${this.count}&rating=g`),{data:s,pagination:e}=await t.json();this.list=s,this.totalCount=e.total_count}catch(t){console.log(t)}},async searchData(t){try{const s=await fetch(`https://api.giphy.com/v1/gifs/search?api_key=XQJsiGIND0fn0MgbDhlEPcgKxR7DykpN&q=${t}&limit=24&offset=0&rating=g&lang=en`),{data:e,pagination:n}=await s.json();if(this.list=e,this.totalCount=n.total_count,!this.list.length&&this.search!=""){const a=Math.ceil(Math.random()*100),l=await fetch(`https://api.giphy.com/v1/gifs/search?api_key=XQJsiGIND0fn0MgbDhlEPcgKxR7DykpN&q=not+found&limit=1&offset=${a}&rating=pg&lang=en`),{data:c}=await l.json();this.list=c,this.totalCount=1}}catch(s){console.log(s)}},async loadMoreData(){try{this.count+=12,this.count>this.totalCount&&(this.count=this.totalCount);let t;this.method=="trending"?t=await fetch(`https://api.giphy.com/v1/gifs/trending?api_key=XQJsiGIND0fn0MgbDhlEPcgKxR7DykpN&limit=${this.count}&rating=g`):this.method=="search"?t=await fetch(`https://api.giphy.com/v1/gifs/search?api_key=XQJsiGIND0fn0MgbDhlEPcgKxR7DykpN&q=${this.search}&limit=${this.count}&offset=0&rating=g&lang=en`):t=await fetch("https://api.giphy.com/v1/gifs/random?api_key=XQJsiGIND0fn0MgbDhlEPcgKxR7DykpN&tag=&rating=g");const{data:s,pagination:e}=await t.json();this.list=[...this.list,...s],this.totalCount=e.total_count}catch(t){console.log(t)}}},mounted(){this.fetchData();const t={rootMargin:"0px",threshold:1},s=n=>{n[0].isIntersecting&&this.loadMoreData()};new IntersectionObserver(s,t).observe(this.$refs.observer)}};const v={class:"main-wrapper"},k={class:"container"},b={class:"header"},x=i("img",{class:"header__logo",src:_,alt:""},null,-1),N={class:"content"},w={class:"content-container",style:{color:"#fff"}},I={ref:"observer",class:"observer"};function M(t,s,e,n,a,l){const c=g("v-text-field"),p=g("GifItem");return r(),h("div",v,[i("div",k,[i("div",b,[x,d(c,{modelValue:a.search,"onUpdate:modelValue":s[0]||(s[0]=o=>a.search=o),class:"header__search",label:"Search...","hide-details":"auto"},null,8,["modelValue"])]),i("div",N,[i("div",w,[(r(!0),h(u,null,y(a.list,o=>(r(),h("div",{key:o.id,style:{color:"#fff"}},[d(p,{title:o.title,shareUrl:o.url,link:o.id,images:o.images},null,8,["title","shareUrl","link","images"])]))),128))]),i("div",I,null,512)])])])}const J=m(D,[["render",M]]);export{J as default};
